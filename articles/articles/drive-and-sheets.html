<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using googlesheets4 with googledrive • googlesheets4</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><link href="../../tidyverse-2.css" rel="stylesheet">
<meta property="og:title" content="Using googlesheets4 with googledrive">
<meta property="og:description" content="">
<meta property="og:image" content="https://googlesheets4.tidyverse.org/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html">googlesheets4</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../articles/googlesheets4.html">Get started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/auth.html">googlesheets4 auth</a>
    </li>
    <li>
      <a href="../../articles/articles/drive-and-sheets.html">Using googlesheets4 with googledrive</a>
    </li>
    <li>
      <a href="../../articles/articles/find-identify-sheets.html">Find and Identify Sheets</a>
    </li>
    <li>
      <a href="../../articles/articles/fun-with-googledrive-and-readxl.html">Fun with googledrive and readxl</a>
    </li>
    <li>
      <a href="../../articles/articles/googlesheets4-reprex.html">How to create a googlesheets4 reprex</a>
    </li>
    <li>
      <a href="../../articles/articles/range-specification.html">Range specification</a>
    </li>
    <li>
      <a href="../../articles/articles/read-sheets.html">Read Sheets</a>
    </li>
    <li>
      <a href="../../articles/articles/write-sheets.html">Write Sheets</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/googlesheets4">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Using googlesheets4 with googledrive</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/googlesheets4/blob/master/vignettes/articles/drive-and-sheets.Rmd"><code>vignettes/articles/drive-and-sheets.Rmd</code></a></small>
      <div class="hidden name"><code>drive-and-sheets.Rmd</code></div>

    </div>

    
    
<div id="why-use-googlesheets4-and-googledrive-together" class="section level2">
<h2 class="hasAnchor">
<a href="#why-use-googlesheets4-and-googledrive-together" class="anchor"></a>Why use googlesheets4 and googledrive together?</h2>
<p>googlesheets4 wraps the Sheets API v4, which lets you read, write, and format data in Sheets. The Sheets API is very focused on spreadsheet-oriented data and metadata, i.e. (work)sheets and cells.</p>
<p>The Sheets API offers practically no support for file-level operations, other than basic spreadsheet creation. There is no way to delete, copy, or rename a Sheet or to place it in a folder or to change its sharing permissions. We must use the Drive API for all of this, which is wrapped by the googledrive package (<a href="https://googledrive.tidyverse.org" class="uri">https://googledrive.tidyverse.org</a>).</p>
<p>Another reason to use the googlesheets4 and googledrive packages together is for ease of file (Sheet) identification. The googlesheets4 package requires you to specify the target Sheet by its ID, not by its <em>name</em>. That’s because the underlying APIs only accept file IDs. But the googledrive package offers lots of support for navigating between human-friendly file names and their associated IDs. This support applies to all files on Drive and, specifically, to Sheets.</p>
<p>Therefore, it is common to use googledrive and googlesheets4 together in a script or app.</p>
</div>
<div id="coordinating-auth" class="section level2">
<h2 class="hasAnchor">
<a href="#coordinating-auth" class="anchor"></a>Coordinating auth</h2>
<p>How does auth work if you’re using googlesheets4 <strong>and</strong> googledrive? The path of least resistance is to do nothing and just let each package deal with its own auth. This works fine! But it’s a bit clunky and you need to make sure you’re using the same Google identity (email) with each package/API.</p>
<p>It can be nicer to be proactive about auth and use the same token for your googledrive and googlesheets4 work. Below we show a couple of ways to do this.</p>
</div>
<div id="auth-with-googledrive-first-then-googlesheets4" class="section level2">
<h2 class="hasAnchor">
<a href="#auth-with-googledrive-first-then-googlesheets4" class="anchor"></a>Auth with googledrive first, then googlesheets4</h2>
<p>Outline:</p>
<ul>
<li>Make sure auth happens first with googledrive, probably by calling <code><a href="https://googledrive.tidyverse.org/reference/drive_auth.html">googledrive::drive_auth()</a></code> yourself. The default scope is <code>"https://www.googleapis.com/auth/drive"</code>, which is sufficient for all your Drive and Sheets work.</li>
<li>Tell googlesheets4 to use the same token as googledrive.</li>
</ul>
<p>First attach both packages.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(googledrive)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(googlesheets4)</span></code></pre></div>
<p>Do auth first with googledrive. Remember <code><a href="https://googledrive.tidyverse.org/reference/drive_auth.html">googledrive::drive_auth()</a></code> accepts additional arguments, e.g. to specify a Google identity via <code>email =</code> or to use a service account via <code>path =</code>. Then direct googlesheets4 to use the same token as googledrive.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://googledrive.tidyverse.org/reference/drive_auth.html">drive_auth</a></span>()</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="../../reference/sheets_auth.html">sheets_auth</a></span>(<span class="dt">token =</span> <span class="kw"><a href="https://googledrive.tidyverse.org/reference/drive_token.html">drive_token</a></span>())</span></code></pre></div>
<p>Now you can use googledrive functions, like <code><a href="https://googledrive.tidyverse.org/reference/drive_find.html">googledrive::drive_find()</a></code> or <code><a href="https://googledrive.tidyverse.org/reference/drive_get.html">googledrive::drive_get()</a></code>, to list files or find them by name, path, or other property. Then, once you’ve identified the target file, use googlesheets4 to do spreadsheet-specific tasks.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="https://googledrive.tidyverse.org/reference/drive_find.html">drive_find</a></span>(<span class="st">"chicken"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt;   name          id                                           drive_resource   </span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt; * &lt;chr&gt;         &lt;chr&gt;                                        &lt;list&gt;           </span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt; 1 chicken-sheet 1ct9t1Efv8pAGN9YO5gC2QfRq2wT4XjNoTMXpVeUghJU &lt;named list [35]&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a>ss &lt;-<span class="st"> </span><span class="kw"><a href="https://googledrive.tidyverse.org/reference/drive_get.html">drive_get</a></span>(<span class="st">"chicken-sheet"</span>)</span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="kw"><a href="../../reference/sheets_get.html">sheets_get</a></span>(ss)</span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt;   Spreadsheet name: chicken-sheet</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt;                 ID: 1ct9t1Efv8pAGN9YO5gC2QfRq2wT4XjNoTMXpVeUghJU</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt;             Locale: en_US</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt;          Time zone: America/Los_Angeles</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt;        # of sheets: 1</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt; </span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt; (Sheet name): (Nominal extent in rows x columns)</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#&gt;  chicken.csv: 1000 x 26</span></span>
<span id="cb3-18"><a href="#cb3-18"></a></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="kw"><a href="../../reference/read_sheet.html">read_sheet</a></span>(ss)</span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co">#&gt; Reading from "chicken-sheet"</span></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="co">#&gt; Range "chicken.csv"</span></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="co">#&gt; # A tibble: 5 x 4</span></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="co">#&gt;   chicken            breed         sex    motto                                 </span></span>
<span id="cb3-24"><a href="#cb3-24"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;                                 </span></span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="co">#&gt; 1 Foghorn Leghorn    Leghorn       roost… That's a joke, ah say, that's a joke,…</span></span>
<span id="cb3-26"><a href="#cb3-26"></a><span class="co">#&gt; 2 Chicken Little     unknown       hen    The sky is falling!                   </span></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="co">#&gt; 3 Ginger             Rhode Island… hen    Listen. We'll either die free chicken…</span></span>
<span id="cb3-28"><a href="#cb3-28"></a><span class="co">#&gt; 4 Camilla the Chick… Chantecler    hen    Bawk, buck, ba-gawk.                  </span></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="co">#&gt; 5 Ernie The Giant C… Brahma        roost… Put Captain Solo in the cargo hold.</span></span></code></pre></div>
<p>If you ever want to confirm the currently authenticated user, both packages provide a <code>*_user()</code> function that reveals some info:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="https://googledrive.tidyverse.org/reference/drive_user.html">drive_user</a></span>()</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co">#&gt; Logged in as:</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt;   *  displayName: googlesheets4-docs@gargle-169921.iam.gserviceaccount.com</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt;   * emailAddress: googlesheets4-docs@gargle-169921.iam.gserviceaccount.com</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw"><a href="../../reference/sheets_user.html">sheets_user</a></span>()</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt; [1] "googlesheets4-docs@gargle-169921.iam.gserviceaccount.com"</span></span></code></pre></div>
<p>We are using a service account to render this article. But if you’ve used the default OAuth flow, this should correspond to the email of the Google account you logged in with.</p>
</div>
<div id="auth-with-googlesheets4-first-then-googledrive" class="section level2">
<h2 class="hasAnchor">
<a href="#auth-with-googlesheets4-first-then-googledrive" class="anchor"></a>Auth with googlesheets4 first, then googledrive</h2>
<p>Outline:</p>
<ul>
<li>Proactively auth with googlesheets4 and specify the <code>"https://www.googleapis.com/auth/drive"</code> scope. The default googlesheets4 scope is <code>"https://www.googleapis.com/auth/spreadsheets"</code>, which is insufficient for general work with the Drive API.</li>
<li>Tell googledrive to use the same token as googlesheets4.</li>
</ul>
<p>First attach both packages.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(googlesheets4)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(googledrive)</span></code></pre></div>
<p>Do auth first with googlesheets4, specifying a Drive scope. Remember <code><a href="../../reference/sheets_auth.html">sheets_auth()</a></code> accepts additional arguments, e.g. to specify a Google identity via <code>email =</code> or to use a service account via <code>path =</code>. Then direct googledrive to use the same token as googlesheets4.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="../../reference/sheets_auth.html">sheets_auth</a></span>(<span class="dt">scope =</span> <span class="st">"https://www.googleapis.com/auth/drive"</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw"><a href="https://googledrive.tidyverse.org/reference/drive_auth.html">drive_auth</a></span>(<span class="dt">token =</span> <span class="kw"><a href="../../reference/sheets_token.html">sheets_token</a></span>())</span></code></pre></div>
<p>Now you can use googledrive functions to list files or find them by name, path, or other property. Then, once you’ve identified the target file, use googlesheets4 to do spreadsheet-specific tasks.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="https://googledrive.tidyverse.org/reference/drive_find.html">drive_find</a></span>(<span class="st">"chicken"</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co">#&gt;   name          id                                           drive_resource   </span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">#&gt; * &lt;chr&gt;         &lt;chr&gt;                                        &lt;list&gt;           </span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">#&gt; 1 chicken-sheet 1ct9t1Efv8pAGN9YO5gC2QfRq2wT4XjNoTMXpVeUghJU &lt;named list [35]&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a>ss &lt;-<span class="st"> </span><span class="kw"><a href="https://googledrive.tidyverse.org/reference/drive_get.html">drive_get</a></span>(<span class="st">"chicken-sheet"</span>)</span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="kw"><a href="../../reference/sheets_get.html">sheets_get</a></span>(ss)</span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt;   Spreadsheet name: chicken-sheet</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt;                 ID: 1ct9t1Efv8pAGN9YO5gC2QfRq2wT4XjNoTMXpVeUghJU</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt;             Locale: en_US</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt;          Time zone: America/Los_Angeles</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt;        # of sheets: 1</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">#&gt; </span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">#&gt; (Sheet name): (Nominal extent in rows x columns)</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">#&gt;  chicken.csv: 1000 x 26</span></span>
<span id="cb7-18"><a href="#cb7-18"></a></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="kw"><a href="../../reference/read_sheet.html">read_sheet</a></span>(ss)</span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co">#&gt; Reading from "chicken-sheet"</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co">#&gt; Range "chicken.csv"</span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">#&gt; # A tibble: 5 x 4</span></span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="co">#&gt;   chicken            breed         sex    motto                                 </span></span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;                                 </span></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="co">#&gt; 1 Foghorn Leghorn    Leghorn       roost… That's a joke, ah say, that's a joke,…</span></span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="co">#&gt; 2 Chicken Little     unknown       hen    The sky is falling!                   </span></span>
<span id="cb7-27"><a href="#cb7-27"></a><span class="co">#&gt; 3 Ginger             Rhode Island… hen    Listen. We'll either die free chicken…</span></span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="co">#&gt; 4 Camilla the Chick… Chantecler    hen    Bawk, buck, ba-gawk.                  </span></span>
<span id="cb7-29"><a href="#cb7-29"></a><span class="co">#&gt; 5 Ernie The Giant C… Brahma        roost… Put Captain Solo in the cargo hold.</span></span></code></pre></div>
</div>
<div id="scope-savvy" class="section level2">
<h2 class="hasAnchor">
<a href="#scope-savvy" class="anchor"></a>Scope savvy</h2>
<p>If you only need “read” access to Drive or Sheets, the conservative thing to do is to specify a read-only scope. This is a great way to limit the damage anyone can do with the token – you or someone else – through carelessness or malice. If you are storing a token on a remote or shared location, it is wise to use the most conservative scope that still gets the job done.</p>
<p>Here are various scopes relevant to googledrive and googlesheets4 and what they would allow.</p>
<p><code>drive</code> scope allows reading and writing with Drive and Sheets APIs. This scope is the most powerful and, therefore, the most dangerous.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">PACKAGE_auth</span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>  ...,</span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="dt">scopes =</span> <span class="st">"https://www.googleapis.com/auth/drive"</span>,</span>
<span id="cb8-4"><a href="#cb8-4"></a>  ...</span>
<span id="cb8-5"><a href="#cb8-5"></a>)</span></code></pre></div>
<p><code>drive.readonly</code> still allows file identification via Drive and can be combined with <code>spreadsheets</code> if you plan to edit, create, or delete Sheets (not explicitly supported yet in googlesheets4, but it will be).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">PACKAGE_auth</span>(</span>
<span id="cb9-2"><a href="#cb9-2"></a>  ...,</span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="dt">scopes =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="st">"https://www.googleapis.com/auth/drive.readonly"</span>,</span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="st">"https://www.googleapis.com/auth/spreadsheets"</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>  ),</span>
<span id="cb9-7"><a href="#cb9-7"></a>  ...</span>
<span id="cb9-8"><a href="#cb9-8"></a>)</span></code></pre></div>
<p>If you are just using Drive to identify Sheets and are only reading from those Sheets, the <code>drive.readonly</code> scope is sufficient and means you can’t modify anything by accident.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">PACKAGE_auth</span>(</span>
<span id="cb10-2"><a href="#cb10-2"></a>  ...,</span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="dt">scopes =</span> <span class="st">"https://www.googleapis.com/auth/drive.readonly"</span>,</span>
<span id="cb10-4"><a href="#cb10-4"></a>  ...</span>
<span id="cb10-5"><a href="#cb10-5"></a>)</span></code></pre></div>
<p>If you are not using Drive at all, i.e. you always identify Sheets by file ID, and you are only reading from those Sheets, you only need googlesheets4 and <code>spreadsheets.readonly</code> is sufficient.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw"><a href="../../reference/sheets_auth.html">sheets_auth</a></span>(</span>
<span id="cb11-2"><a href="#cb11-2"></a>  ...,</span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="dt">scopes =</span> <span class="st">"https://www.googleapis.com/auth/spreadsheets.readonly"</span>,</span>
<span id="cb11-4"><a href="#cb11-4"></a>  ...</span>
<span id="cb11-5"><a href="#cb11-5"></a>)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#why-use-googlesheets4-and-googledrive-together">Why use googlesheets4 and googledrive together?</a></li>
      <li><a href="#coordinating-auth">Coordinating auth</a></li>
      <li><a href="#auth-with-googledrive-first-then-googlesheets4">Auth with googledrive first, then googlesheets4</a></li>
      <li><a href="#auth-with-googlesheets4-first-then-googledrive">Auth with googlesheets4 first, then googledrive</a></li>
      <li><a href="#scope-savvy">Scope savvy</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="tidyverse">
  <p>googlesheets4 is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href="https://jennybryan.org">Jennifer Bryan</a>, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
